<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Business Case Builder - HupData</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Chart.js for interactive graphs -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <style>
    .chart-container {
      position: relative;
      height: 350px;
      margin: 1rem 0;
    }
    @media (max-width: 768px) {
      .chart-container {
        height: 300px;
      }
    }
    @media print {
      .chart-container {
        page-break-inside: avoid;
      }
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    // Lucide Icons as React components
    const FileText = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
      </svg>
    );

    const Target = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <circle cx="12" cy="12" r="10" strokeWidth={2}></circle>
        <circle cx="12" cy="12" r="6" strokeWidth={2}></circle>
        <circle cx="12" cy="12" r="2" strokeWidth={2}></circle>
      </svg>
    );

    const TrendingUp = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
      </svg>
    );

    const CheckCircle = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
    );

    const Download = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
      </svg>
    );

    const ChevronRight = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
      </svg>
    );

    const ChevronLeft = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
      </svg>
    );

    const Calculator = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <rect x="4" y="2" width="16" height="20" rx="2" strokeWidth={2}></rect>
        <line x1="8" y1="6" x2="16" y2="6" strokeWidth={2}></line>
      </svg>
    );

    const Clock = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <circle cx="12" cy="12" r="10" strokeWidth={2}></circle>
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6v6l4 2" />
      </svg>
    );

    const Zap = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 10V3L4 14h7v7l9-11h-7z" />
      </svg>
    );

    const Award = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <circle cx="12" cy="8" r="7" strokeWidth={2}></circle>
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8.21 13.89L7 23l5-3 5 3-1.21-9.12" />
      </svg>
    );

    const AlertTriangle = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
      </svg>
    );

    const { useState, useEffect } = React;

    // Benchmarks por √°rea
    const areaBenchmarks = {
      tributaria: {
        nome: 'Tribut√°ria',
        reducaoTempo: 75,
        reducaoErros: 92,
        ganhoVelocidade: 80,
        desafiosComuns: [
          'C√°lculos complexos de impostos',
          'M√∫ltiplas legisla√ß√µes simult√¢neas',
          'Prazos de entrega cr√≠ticos'
        ],
        beneficiosEspecificos: [
          'C√°lculo autom√°tico de impostos federais, estaduais e municipais',
          'Valida√ß√£o cruzada de dados entre sistemas',
          'Alertas de prazos e obriga√ß√µes acess√≥rias'
        ],
        quickWins: [
          { titulo: 'Concilia√ß√£o de ICMS', economia: 12000, tempo: 3, impacto: 'ALTO' },
          { titulo: 'Apura√ß√£o de PIS/COFINS', economia: 15000, tempo: 4, impacto: 'ALTO' },
          { titulo: 'Valida√ß√£o de Notas Fiscais', economia: 8000, tempo: 2, impacto: 'MEDIO' }
        ]
      },
      fiscal: {
        nome: 'Fiscal',
        reducaoTempo: 70,
        reducaoErros: 88,
        ganhoVelocidade: 75,
        desafiosComuns: [
          'Volume alto de documentos fiscais',
          'Valida√ß√µes complexas de NFe',
          'Conformidade com SPED'
        ],
        beneficiosEspecificos: [
          'Valida√ß√£o autom√°tica de XMLs e arquivos SPED',
          'Detec√ß√£o de inconsist√™ncias antes do envio',
          'Auditoria cont√≠nua de processos fiscais'
        ],
        quickWins: [
          { titulo: 'Valida√ß√£o SPED Fiscal', economia: 10000, tempo: 3, impacto: 'ALTO' },
          { titulo: 'Reconcilia√ß√£o de NFe', economia: 13000, tempo: 4, impacto: 'ALTO' },
          { titulo: 'Relat√≥rios Fiscais', economia: 6000, tempo: 2, impacto: 'MEDIO' }
        ]
      },
      auditoria: {
        nome: 'Auditoria',
        reducaoTempo: 72,
        reducaoErros: 95,
        ganhoVelocidade: 78,
        desafiosComuns: [
          'An√°lise de grandes volumes de dados',
          'Identifica√ß√£o de anomalias',
          'Documenta√ß√£o de evid√™ncias'
        ],
        beneficiosEspecificos: [
          'An√°lise de 100% dos dados vs amostragem',
          'Detec√ß√£o autom√°tica de padr√µes suspeitos',
          'Trilhas de auditoria autom√°ticas'
        ],
        quickWins: [
          { titulo: 'Detec√ß√£o de Anomalias', economia: 18000, tempo: 5, impacto: 'ALTO' },
          { titulo: 'Testes de Controles', economia: 11000, tempo: 3, impacto: 'MEDIO' },
          { titulo: 'Coleta Autom√°tica de Dados', economia: 7000, tempo: 2, impacto: 'MEDIO' }
        ]
      },
      compliance: {
        nome: 'Fiscal Compliance',
        reducaoTempo: 68,
        reducaoErros: 90,
        ganhoVelocidade: 72,
        desafiosComuns: [
          'Obriga√ß√µes acess√≥rias m√∫ltiplas',
          'Prazos regulat√≥rios r√≠gidos',
          'Integra√ß√£o de sistemas legados'
        ],
        beneficiosEspecificos: [
          'Calend√°rio automatizado de obriga√ß√µes',
          'Valida√ß√£o pr√©-envio de arquivos fiscais',
          'Monitoramento de pend√™ncias e alertas'
        ],
        quickWins: [
          { titulo: 'Valida√ß√£o de Arquivos SPED', economia: 14000, tempo: 4, impacto: 'ALTO' },
          { titulo: 'Calend√°rio de Obriga√ß√µes', economia: 9000, tempo: 2, impacto: 'MEDIO' },
          { titulo: 'Concilia√ß√£o de Dados', economia: 11000, tempo: 3, impacto: 'ALTO' }
        ]
      }
    };

const BusinessCaseBuilder = () => {
  const [currentStep, setCurrentStep] = useState(0);
  const [showMethodology, setShowMethodology] = useState(false);
  const [formData, setFormData] = useState({
    nomeGestor: '',
    email: '',
    whatsapp: '',
    empresa: '',
    area: 'tributaria',
    cargo: 'gerente',
    numProfissionais: 5,
    percentualAtividadesManuais: 40,
    custoPorHora: 80,
    numeroProcessos: 10,
    tempoMedioProcesso: 4,
    errosFrequentes: true,
    sistemasUtilizados: ['SAP', 'Excel'],
    prioridadeAutomacao: 'alta'
  });
  
  // ===== AUTO-SELE√á√ÉO DE PRIORIDADE BASEADA EM ERROS =====
  useEffect(() => {
    // Atualiza prioridade automaticamente quando errosFrequentes muda
    if (formData.errosFrequentes) {
      setFormData(prev => ({ ...prev, prioridadeAutomacao: 'alta' }));
    } else {
      setFormData(prev => ({ ...prev, prioridadeAutomacao: 'media' }));
    }
  }, [formData.errosFrequentes]);

  // ===== RENDERIZA√á√ÉO DOS GR√ÅFICOS CHART.JS =====
  useEffect(() => {
    // Aguarda o DOM estar pronto
    const timeout = setTimeout(() => {
      const roi = calculateROI();
      
      // Destruir gr√°ficos anteriores se existirem
      if (window.chartInstances) {
        Object.values(window.chartInstances).forEach(chart => {
          if (chart) chart.destroy();
        });
      }
      window.chartInstances = {};

      // 1. Gr√°fico de Pizza (Etapa 2)
      const pizzaCanvas = document.getElementById('chartPizzaTempo');
      if (pizzaCanvas && currentStep === 2) {
        const ctxPizza = pizzaCanvas.getContext('2d');
        window.chartInstances.pizza = new Chart(ctxPizza, {
          type: 'doughnut',
          data: {
            labels: ['Tarefas Manuais (Desperd√≠cio)', 'Trabalho Estrat√©gico'],
            datasets: [{
              data: [formData.percentualAtividadesManuais, 100 - formData.percentualAtividadesManuais],
              backgroundColor: ['#ef4444', '#10b981'],
              borderColor: ['#dc2626', '#059669'],
              borderWidth: 3
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              title: {
                display: true,
                text: 'Distribui√ß√£o Atual do Tempo da Equipe',
                font: { size: 16, weight: 'bold' },
                color: '#032c62'
              },
              legend: {
                display: true,
                position: 'bottom',
                labels: { font: { size: 12 }, padding: 15 }
              },
              tooltip: {
                callbacks: {
                  label: function(context) {
                    return context.label + ': ' + context.parsed + '%';
                  }
                }
              }
            }
          },
          plugins: [{
            id: 'percentageLabels',
            afterDatasetDraw: function(chart) {
              const ctx = chart.ctx;
              chart.data.datasets.forEach((dataset, datasetIndex) => {
                const meta = chart.getDatasetMeta(datasetIndex);
                meta.data.forEach((element, index) => {
                  const data = dataset.data[index];
                  const x = element.x;
                  const y = element.y;
                  
                  ctx.fillStyle = 'white';
                  ctx.font = 'bold 24px Arial';
                  ctx.textAlign = 'center';
                  ctx.textBaseline = 'middle';
                  ctx.fillText(data + '%', x, y);
                });
              });
            }
          }]
        });
      }

      // 2. Gr√°fico Antes vs Depois (Etapa 4 - Situa√ß√£o Atual)
      const antesDepoisCanvas = document.getElementById('chartAntesDepois');
      if (antesDepoisCanvas && currentStep === 4) {
        const ctxAntesDepois = antesDepoisCanvas.getContext('2d');
        const custoAtual = roi.custoTotal;
        const custoDepois = custoAtual - roi.economiaMensal;
        
        window.chartInstances.antesDepois = new Chart(ctxAntesDepois, {
          type: 'bar',
          data: {
            labels: ['Custo Mensal'],
            datasets: [
              {
                label: 'Atual (com tarefas manuais)',
                data: [custoAtual],
                backgroundColor: '#ef4444',
                borderColor: '#dc2626',
                borderWidth: 2
              },
              {
                label: 'Com Automa√ß√£o',
                data: [custoDepois],
                backgroundColor: '#10b981',
                borderColor: '#059669',
                borderWidth: 2
              },
              {
                label: 'Economia Mensal',
                data: [roi.economiaMensal],
                backgroundColor: '#f59e0b',
                borderColor: '#d97706',
                borderWidth: 2
              }
            ]
          },
          options: {
            indexAxis: 'y',
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              title: {
                display: true,
                text: `Redu√ß√£o de ${((roi.economiaMensal / custoAtual) * 100).toFixed(0)}% no Custo Mensal Operacional`,
                font: { size: 16, weight: 'bold' },
                color: '#032c62'
              },
              legend: { display: true, position: 'bottom' },
              tooltip: {
                callbacks: {
                  label: function(context) {
                    return context.dataset.label + ': R$ ' + context.parsed.x.toLocaleString('pt-BR');
                  }
                }
              }
            },
            scales: {
              x: {
                beginAtZero: true,
                ticks: { callback: value => `R$ ${(value/1000).toFixed(0)}k` }
              }
            }
          }
        });
      }

      // 3. Gr√°fico de Valida√ß√£o Cruzada (Etapa 4 - An√°lise Financeira)
      const validacaoCanvas = document.getElementById('chartValidacao');
      if (validacaoCanvas && currentStep === 4) {
        const ctxValidacao = validacaoCanvas.getContext('2d');
        
        window.chartInstances.validacao = new Chart(ctxValidacao, {
          type: 'bar',
          data: {
            labels: ['C√°lculo por\n% Tempo', 'C√°lculo por\nProcessos', 'Custo m√©dio\nvalidado'],
            datasets: [{
              label: 'Custo Mensal Calculado',
              data: [roi.custoAtualMensalPorTempo, roi.custoAtualMensalPorProcessos, roi.custoAtualMensal],
              backgroundColor: ['#3b82f6', '#8b5cf6', '#10b981'],
              borderColor: ['#2563eb', '#7c3aed', '#059669'],
              borderWidth: 2
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              title: {
                display: false
              },
              legend: { display: false },
              tooltip: {
                callbacks: {
                  label: function(context) {
                    return 'Custo: R$ ' + context.parsed.y.toLocaleString('pt-BR');
                  }
                }
              }
            },
            scales: {
              y: {
                beginAtZero: true,
                ticks: { callback: value => `R$ ${(value/1000).toFixed(0)}k` }
              }
            }
          }
        });
      }

      // 4. Gr√°fico de Payback (Etapa 4 - An√°lise Financeira)
      const paybackCanvas = document.getElementById('chartPayback');
      if (paybackCanvas && currentStep === 4) {
        const ctxPayback = paybackCanvas.getContext('2d');
        const meses = 18;
        const economiaAcumulada = Array.from({length: meses + 1}, (_, i) => i * roi.economiaMensal);
        const investimentoLinha = Array.from({length: meses + 1}, () => roi.custoImplementacao);
        
        window.chartInstances.payback = new Chart(ctxPayback, {
          type: 'line',
          data: {
            labels: Array.from({length: meses + 1}, (_, i) => i === 0 ? 'In√≠cio' : `${i}m`),
            datasets: [
              {
                label: 'Economia Acumulada',
                data: economiaAcumulada,
                borderColor: '#10b981',
                backgroundColor: 'rgba(16, 185, 129, 0.1)',
                fill: true,
                tension: 0.4,
                borderWidth: 3,
                pointRadius: 4,
                pointHoverRadius: 6
              },
              {
                label: 'Investimento Inicial',
                data: investimentoLinha,
                borderColor: '#ef4444',
                borderDash: [10, 5],
                fill: false,
                borderWidth: 2,
                pointRadius: 0
              }
            ]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              title: {
                display: true,
                text: `Payback: ${roi.payback.toFixed(1)} meses | ROI Anual: ${roi.roiAnual.toFixed(0)}%`,
                font: { size: 16, weight: 'bold' },
                color: '#032c62'
              },
              legend: { display: true, position: 'bottom' },
              tooltip: {
                callbacks: {
                  label: function(context) {
                    return context.dataset.label + ': R$ ' + context.parsed.y.toLocaleString('pt-BR');
                  }
                }
              }
            },
            scales: {
              y: {
                beginAtZero: true,
                ticks: { callback: value => `R$ ${(value/1000).toFixed(0)}k` }
              }
            }
          }
        });
      }

      // 5. Gr√°fico de Evolu√ß√£o 12 Meses (Etapa 4 - An√°lise Financeira)
      const evolucaoCanvas = document.getElementById('chartEvolucao');
      if (evolucaoCanvas && currentStep === 4) {
        const ctxEvolucao = evolucaoCanvas.getContext('2d');
        const mesesAno = ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'];
        const economiaAcumuladaAno = Array.from({length: 12}, (_, i) => (i + 1) * roi.economiaMensal);
        
        window.chartInstances.evolucao = new Chart(ctxEvolucao, {
          type: 'line',
          data: {
            labels: mesesAno,
            datasets: [{
              label: 'Economia Acumulada',
              data: economiaAcumuladaAno,
              borderColor: '#10b981',
              backgroundColor: 'rgba(16, 185, 129, 0.2)',
              fill: true,
              tension: 0.4,
              borderWidth: 3,
              pointRadius: 5,
              pointHoverRadius: 7,
              pointBackgroundColor: '#10b981'
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              title: {
                display: true,
                text: `Economia Total em 12 Meses: R$ ${roi.economiaAnual.toLocaleString('pt-BR')}`,
                font: { size: 16, weight: 'bold' },
                color: '#032c62'
              },
              legend: { display: false },
              tooltip: {
                callbacks: {
                  label: function(context) {
                    return 'Acumulado: R$ ' + context.parsed.y.toLocaleString('pt-BR');
                  }
                }
              }
            },
            scales: {
              y: {
                beginAtZero: true,
                ticks: { callback: value => `R$ ${(value/1000).toFixed(0)}k` }
              }
            }
          }
        });
      }
    }, 100);

    return () => clearTimeout(timeout);
  }, [currentStep, formData]);

  const [showResults, setShowResults] = useState(false);

  const steps = [
    { id: 'info', title: 'Informa√ß√µes B√°sicas', icon: FileText },
    { id: 'diagnostico', title: 'Diagn√≥stico Atual', icon: Target },
    { id: 'ganhos', title: 'Ganhos Esperados', icon: TrendingUp },
    { id: 'plano', title: 'Plano de A√ß√£o', icon: CheckCircle },
    { id: 'resultado', title: 'Business Case', icon: Download }
  ];

  const handleInputChange = (field, value) => {
    setFormData(prev => ({ ...prev, [field]: value }));
  };

  const handleMultiSelect = (field, value) => {
    const current = formData[field] || [];
    let newArray;
    if (current.includes(value)) {
      newArray = current.filter(v => v !== value);
    } else {
      newArray = [...current, value];
    }
    handleInputChange(field, newArray);
  };

  const getBenchmark = () => {
    return areaBenchmarks[formData.area] || areaBenchmarks.tributaria;
  };

  const getMensagemPorPrioridade = () => {
    const mensagens = {
      alta: {
        titulo: "üö® Situa√ß√£o Cr√≠tica Identificada",
        subtitulo: "A√ß√£o imediata recomendada",
        cor: "red",
        bgColor: "bg-red-50",
        borderColor: "border-red-500",
        textColor: "text-red-900",
        cta: "Agendar Reuni√£o de Emerg√™ncia"
      },
      media: {
        titulo: "‚ö†Ô∏è Oportunidade de Melhoria",
        subtitulo: "Implementa√ß√£o recomendada nos pr√≥ximos 90 dias",
        cor: "orange",
        bgColor: "bg-orange-50",
        borderColor: "border-orange-500",
        textColor: "text-orange-900",
        cta: "Agendar Reuni√£o de Discovery"
      },
      baixa: {
        titulo: "üí° Potencial de Otimiza√ß√£o",
        subtitulo: "Planejamento para pr√≥ximo ciclo or√ßament√°rio",
        cor: "blue",
        bgColor: "bg-blue-50",
        borderColor: "border-blue-500",
        textColor: "text-blue-900",
        cta: "Receber Mais Informa√ß√µes"
      }
    };
    return mensagens[formData.prioridadeAutomacao];
  };

  const getTimelinePorPrioridade = () => {
    const timelines = {
      alta: {
        discovery: 2,
        desenvolvimento: 6,
        implantacao: 2,
        total: 10,
        nota: "Timeline acelerada para atender urg√™ncia",
        entregas: [
          "Quick win em 3 semanas",
          "Primeiro processo automatizado em 6 semanas",
          "Go-live completo em 10 semanas"
        ]
      },
      media: {
        discovery: 3,
        desenvolvimento: 8,
        implantacao: 3,
        total: 14,
        nota: "Timeline balanceada entre qualidade e velocidade",
        entregas: [
          "Discovery completo em 3 semanas",
          "Prot√≥tipo em 7 semanas",
          "Go-live completo em 14 semanas"
        ]
      },
      baixa: {
        discovery: 4,
        desenvolvimento: 10,
        implantacao: 4,
        total: 18,
        nota: "Timeline otimizada para minimizar disrup√ß√£o",
        entregas: [
          "Planejamento detalhado em 4 semanas",
          "Implementa√ß√£o gradual em fases",
          "Go-live completo em 18 semanas"
        ]
      }
    };
    return timelines[formData.prioridadeAutomacao];
  };

  // ===== C√ÅLCULO DE ROI COMPLETO COM TODAS AS NOVAS FUNCIONALIDADES =====
  const calculateROI = () => {
    const percentualAtividadesManuais = formData.percentualAtividadesManuais || 40;
    const numProfissionais = formData.numProfissionais || 1;
    const custoPorHora = formData.custoPorHora || 0;
    const numeroProcessos = formData.numeroProcessos || 10;
    const tempoMedioProcesso = formData.tempoMedioProcesso || 4;
    const fontesDados = formData.sistemasUtilizados.length || 1;
    
    const benchmark = getBenchmark();
    const reducaoEstimada = benchmark.reducaoTempo / 100;
    
    // Coeficiente de esfor√ßo baseado em fontes de dados
    let coeficienteEsforco = 1.0;
    if (fontesDados > 4) {
      coeficienteEsforco = 1.08;
    } else if (fontesDados >= 3) {
      coeficienteEsforco = 1.05;
    }
    
    // ===== M√âTODO 1: C√ÅLCULO POR % DE TEMPO =====
    const taxaAtividadeManual = 160 * (percentualAtividadesManuais / 100);
    const custoAtualMensalPorTempo = numProfissionais * taxaAtividadeManual * custoPorHora * coeficienteEsforco;
    
    // ===== M√âTODO 2: C√ÅLCULO POR PROCESSOS =====
    const custoAtualMensalPorProcessos = numeroProcessos * tempoMedioProcesso * custoPorHora * 4.33 * coeficienteEsforco;
    
    // ===== VALIDA√á√ÉO CRUZADA: USA M√âDIA DOS DOIS M√âTODOS =====
    const custoAtualMensal = (custoAtualMensalPorTempo + custoAtualMensalPorProcessos) / 2;
    
    // ===== AJUSTE POR ERROS FREQUENTES =====
    let custoErros = 0;
    let custoTotal = custoAtualMensal;
    
    if (formData.errosFrequentes) {
      // Adiciona 15% de custo por retrabalho de erros
      custoErros = custoAtualMensal * 0.15;
      custoTotal = custoAtualMensal + custoErros;
    }
    
    // Economia mensal e anual
    const economiaMensal = custoTotal * reducaoEstimada;
    const economiaAnual = economiaMensal * 12;
    
    // ===== AJUSTE DE INVESTIMENTO POR COMPLEXIDADE (numeroProcessos) =====
    let custoImplementacao = 45000;
    let complexidadeProjeto = 'M√©dia';
    
    if (numeroProcessos <= 5) {
      custoImplementacao = 30000;
      complexidadeProjeto = 'Baixa';
    } else if (numeroProcessos <= 15) {
      custoImplementacao = 45000;
      complexidadeProjeto = 'M√©dia';
    } else if (numeroProcessos <= 25) {
      custoImplementacao = 65000;
      complexidadeProjeto = 'Alta';
    } else {
      custoImplementacao = 85000;
      complexidadeProjeto = 'Muito Alta';
    }
    
    // ===== TEMPO DE IMPLEMENTA√á√ÉO BASEADO EM PROCESSOS =====
    const tempoDiscovery = Math.ceil(numeroProcessos / 5); // 1 semana a cada 5 processos
    const tempoDev = Math.ceil(numeroProcessos / 2); // 1 semana a cada 2 processos
    const tempoCapacitacao = 3; // Fixo
    const tempoTotal = tempoDiscovery + tempoDev + tempoCapacitacao;
    
    // ===== ESTRAT√âGIA DE PRIORIZA√á√ÉO =====
    let estrategia = '';
    let fasesImplementacao = [];
    
    if (numeroProcessos <= 5) {
      estrategia = 'Big Bang';
      fasesImplementacao = [
        { fase: 1, processos: numeroProcessos, duracao: '6-8 semanas', descricao: 'Todos os processos de uma vez' }
      ];
    } else if (numeroProcessos <= 15) {
      estrategia = 'Faseada (2 ondas)';
      const metade = Math.ceil(numeroProcessos / 2);
      fasesImplementacao = [
        { fase: 1, processos: metade, duracao: '8-10 semanas', descricao: 'Processos cr√≠ticos' },
        { fase: 2, processos: numeroProcessos - metade, duracao: '6-8 semanas', descricao: 'Processos secund√°rios' }
      ];
    } else {
      estrategia = 'Incremental (3+ ondas)';
      const terco = Math.ceil(numeroProcessos / 3);
      fasesImplementacao = [
        { fase: 1, processos: terco, duracao: '8-10 semanas', descricao: 'Quick Wins' },
        { fase: 2, processos: terco, duracao: '8-10 semanas', descricao: 'Processos core' },
        { fase: 3, processos: numeroProcessos - (terco * 2), duracao: '6-8 semanas', descricao: 'Processos restantes' }
      ];
    }
    
    // ===== ECONOMIA POR PROCESSO =====
    const economiaPorProcessoMensal = economiaMensal / numeroProcessos;
    const economiaPorProcessoAnual = economiaAnual / numeroProcessos;
    const investimentoPorProcesso = custoImplementacao / numeroProcessos;
    const roiPorProcesso = ((economiaPorProcessoAnual - investimentoPorProcesso) / investimentoPorProcesso) * 100;
    
    // ===== AN√ÅLISE DE VIABILIDADE =====
    const processosPorProfissional = numeroProcessos / numProfissionais;
    let alertas = [];
    
    if (processosPorProfissional < 2) {
      alertas.push({
        tipo: 'warning',
        mensagem: `Apenas ${processosPorProfissional.toFixed(1)} processos por profissional. Considere revisar o escopo ou mapear subprocessos.`
      });
    }
    
    if (processosPorProfissional > 10) {
      alertas.push({
        tipo: 'info',
        mensagem: `${processosPorProfissional.toFixed(1)} processos por profissional indicam alta carga de trabalho. Priorize processos de maior impacto.`
      });
    }
    
    if (numeroProcessos < 5 && custoImplementacao > 30000) {
      alertas.push({
        tipo: 'warning',
        mensagem: 'Poucos processos para investimento alto. Considere adicionar mais processos ao escopo.'
      });
    }
    
    // C√°lculos finais
    const payback = custoImplementacao / economiaMensal;
    const paybackReal = payback + (tempoTotal / 4.33);
    const roiAnual = ((economiaAnual - custoImplementacao) / custoImplementacao * 100);
    
    return {
      // Custos
      custoAtualMensal,
      custoAtualMensalPorTempo,
      custoAtualMensalPorProcessos,
      custoErros,
      custoTotal,
      custoImplementacao,
      
      // Economias
      economiaMensal,
      economiaAnual,
      economiaPorProcessoMensal,
      economiaPorProcessoAnual,
      
      // ROI e Payback
      roiAnual,
      roiPorProcesso,
      payback,
      paybackReal,
      
      // Complexidade e Tempo
      complexidadeProjeto,
      coeficienteEsforco,
      taxaAtividadeManual,
      tempoDiscovery,
      tempoDev,
      tempoCapacitacao,
      tempoTotal,
      
      // Estrat√©gia
      estrategia,
      fasesImplementacao,
      
      // An√°lises
      processosPorProfissional,
      investimentoPorProcesso,
      alertas,
      
      // Benchmark
      benchmark
    };
  };

  const roi = calculateROI();
  const timeline = getTimelinePorPrioridade();
  const mensagemPrioridade = getMensagemPorPrioridade();

  const renderStepContent = () => {
    switch(currentStep) {
      case 0:
        return (
          <div className="space-y-6">
            <div className="bg-[#032c62] rounded-lg px-6 py-4 -mx-8 mb-6 shadow-md">
              <h2 className="text-2xl font-bold text-white">Informa√ß√µes B√°sicas</h2>
            </div>
            
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label className="block text-sm font-bold text-gray-700 mb-2">
                  Seu Nome *
                </label>
                <input
                  type="text"
                  value={formData.nomeGestor}
                  onChange={(e) => handleInputChange('nomeGestor', e.target.value)}
                  className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#032c62] focus:border-transparent"
                  placeholder="Jo√£o Silva"
                />
              </div>
              
              <div>
                <label className="block text-sm font-bold text-gray-700 mb-2">
                  Email *
                </label>
                <input
                  type="email"
                  value={formData.email}
                  onChange={(e) => handleInputChange('email', e.target.value)}
                  className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#032c62] focus:border-transparent"
                  placeholder="joao@empresa.com"
                />
              </div>
              
              <div>
                <label className="block text-sm font-bold text-gray-700 mb-2">
                  WhatsApp *
                </label>
                <input
                  type="tel"
                  value={formData.whatsapp}
                  onChange={(e) => handleInputChange('whatsapp', e.target.value)}
                  className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#032c62] focus:border-transparent"
                  placeholder="(11) 99999-9999"
                />
              </div>
              
              <div>
                <label className="block text-sm font-bold text-gray-700 mb-2">
                  Empresa *
                </label>
                <input
                  type="text"
                  value={formData.empresa}
                  onChange={(e) => handleInputChange('empresa', e.target.value)}
                  className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#032c62] focus:border-transparent"
                  placeholder="Nome da Empresa"
                />
              </div>
              
              <div>
                <label className="block text-sm font-bold text-gray-700 mb-2">
                  √Årea de Atua√ß√£o *
                </label>
                <select
                  value={formData.area}
                  onChange={(e) => handleInputChange('area', e.target.value)}
                  className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#032c62] focus:border-transparent"
                >
                  <option value="tributaria">Tribut√°ria</option>
                  <option value="fiscal">Fiscal</option>
                  <option value="auditoria">Auditoria</option>
                  <option value="compliance">Compliance</option>
                </select>
              </div>
              
              <div>
                <label className="block text-sm font-bold text-gray-700 mb-2">
                  Seu Cargo *
                </label>
                <select
                  value={formData.cargo}
                  onChange={(e) => handleInputChange('cargo', e.target.value)}
                  className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#032c62] focus:border-transparent"
                >
                  <option value="analista">Analista</option>
                  <option value="coordenador">Coordenador</option>
                  <option value="gerente">Gerente</option>
                  <option value="diretor">Diretor</option>
                  <option value="cfo">CFO</option>
                  <option value="cto">CTO</option>
                </select>
              </div>
            </div>

            <div className="bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4">
              <div className="flex items-start">
                <FileText className="w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0" />
                <div>
                  <h3 className="font-semibold text-blue-900 mb-1">Benchmark da √Årea: {getBenchmark().nome}</h3>
                  <p className="text-sm text-blue-700">
                    Redu√ß√£o m√©dia de tempo: <strong>{getBenchmark().reducaoTempo}%</strong> | 
                    Redu√ß√£o de erros: <strong>{getBenchmark().reducaoErros}%</strong> | 
                    Ganho em velocidade: <strong>{getBenchmark().ganhoVelocidade}%</strong>
                  </p>
                </div>
              </div>
            </div>
          </div>
        );
      
      case 1:
        return (
          <div className="space-y-6">
            <div className="bg-[#032c62] rounded-lg px-6 py-4 -mx-8 mb-6 shadow-md">
              <h2 className="text-2xl font-bold text-white">Diagn√≥stico Atual</h2>
            </div>
            
            <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6">
              <h3 className="font-semibold text-yellow-900 mb-2">Desafios Comuns em {getBenchmark().nome}</h3>
              <ul className="space-y-1">
                {getBenchmark().desafiosComuns.map((desafio, idx) => (
                  <li key={idx} className="text-sm text-yellow-800 flex items-center">
                    <span className="w-1.5 h-1.5 bg-yellow-600 rounded-full mr-2"></span>
                    {desafio}
                  </li>
                ))}
              </ul>
            </div>

            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label className="block text-sm font-bold text-gray-700 mb-2">
                  N√∫mero de Profissionais na Equipe
                </label>
                <input
                  type="number"
                  value={formData.numProfissionais}
                  onChange={(e) => handleInputChange('numProfissionais', parseInt(e.target.value))}
                  className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#032c62] focus:border-transparent"
                  min="1"
                />
              </div>
              
              <div>
                <label className="block text-sm font-bold text-gray-700 mb-2">
                  % de Atividades Manuais/Repetitivas
                </label>
                <div className="flex items-center gap-3">
                  <input
                    type="range"
                    min="0"
                    max="100"
                    value={formData.percentualAtividadesManuais}
                    onChange={(e) => handleInputChange('percentualAtividadesManuais', parseInt(e.target.value))}
                    className="flex-1"
                  />
                  <span className="text-lg font-semibold text-[#032c62] min-w-[60px] text-right">
                    {formData.percentualAtividadesManuais}%
                  </span>
                </div>
              </div>
              
              <div>
                <label className="block text-sm font-bold text-gray-700 mb-2">
                  Custo M√©dio por Hora (R$)
                </label>
                <input
                  type="number"
                  value={formData.custoPorHora}
                  onChange={(e) => handleInputChange('custoPorHora', parseFloat(e.target.value))}
                  className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#032c62] focus:border-transparent"
                  min="0"
                  step="10"
                />
              </div>
              
              <div>
                <label className="block text-sm font-bold text-gray-700 mb-2">
                  N√∫mero de Processos Cr√≠ticos
                </label>
                <input
                  type="number"
                  value={formData.numeroProcessos}
                  onChange={(e) => handleInputChange('numeroProcessos', parseInt(e.target.value))}
                  className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#032c62] focus:border-transparent"
                  min="1"
                />
                <p className="text-xs text-gray-500 mt-1">
                  Usado para calcular complexidade do projeto
                </p>
              </div>
              
              <div>
                <label className="block text-sm font-bold text-gray-700 mb-2">
                  Tempo M√©dio por Processo (horas)
                </label>
                <input
                  type="number"
                  value={formData.tempoMedioProcesso}
                  onChange={(e) => handleInputChange('tempoMedioProcesso', parseFloat(e.target.value))}
                  className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#032c62] focus:border-transparent"
                  min="0.5"
                  step="0.5"
                />
                <p className="text-xs text-gray-500 mt-1">
                  Usado para valida√ß√£o cruzada do ROI
                </p>
              </div>
            </div>
            
            <div>
              <label className="block text-sm font-bold text-gray-700 mb-2">
                Sistemas Utilizados (selecione todos que usa)
              </label>
              <div className="grid grid-cols-2 md:grid-cols-4 gap-2">
                {['SAP', 'Excel', 'SQL', 'Oracle', 'Totvs', 'Outros'].map(sistema => (
                  <button
                    key={sistema}
                    onClick={() => handleMultiSelect('sistemasUtilizados', sistema)}
                    className={`px-4 py-2 rounded-lg border-2 transition-all ${
                      formData.sistemasUtilizados.includes(sistema)
                        ? 'bg-[#032c62] text-white border-[#032c62]'
                        : 'bg-white text-gray-700 border-gray-300 hover:border-[#032c62]'
                    }`}
                  >
                    {sistema}
                  </button>
                ))}
              </div>
              <p className="text-xs text-gray-500 mt-2">
                {formData.sistemasUtilizados.length} sistema(s) selecionado(s) - usado para calcular complexidade
              </p>
            </div>
            
            <div>
              <label className="block text-sm font-bold text-gray-700 mb-2">
                Ocorrem Erros Frequentes?
              </label>
              <div className="flex gap-4">
                <button
                  onClick={() => handleInputChange('errosFrequentes', true)}
                  className={`flex-1 px-4 py-2 rounded-lg border-2 transition-all ${
                    formData.errosFrequentes
                      ? 'bg-red-50 text-red-700 border-red-300'
                      : 'bg-white text-gray-700 border-gray-300'
                  }`}
                >
                  Sim
                </button>
                <button
                  onClick={() => handleInputChange('errosFrequentes', false)}
                  className={`flex-1 px-4 py-2 rounded-lg border-2 transition-all ${
                    !formData.errosFrequentes
                      ? 'bg-green-50 text-green-700 border-green-300'
                      : 'bg-white text-gray-700 border-gray-300'
                  }`}
                >
                  N√£o
                </button>
              </div>
              <p className="text-xs text-gray-500 mt-2">
                {formData.errosFrequentes 
                  ? '‚ö†Ô∏è Erros frequentes aumentam o custo atual em ~15% por retrabalho'
                  : '‚úì Sem erros frequentes - c√°lculo baseado apenas em tempo manual'}
              </p>
            </div>
          </div>
        );
      
      case 2:
        return (
          <div className="space-y-6">
            <div className="bg-[#032c62] rounded-lg px-6 py-4 -mx-8 mb-6 shadow-md">
              <h2 className="text-2xl font-bold text-white">Ganhos Esperados com Automa√ß√£o</h2>
            </div>

            <div className="bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-5 mb-6">
              <h3 className="font-bold text-green-900 mb-3 text-lg">Benef√≠cios Espec√≠ficos para {getBenchmark().nome}</h3>
              <div className="space-y-2">
                {getBenchmark().beneficiosEspecificos.map((beneficio, idx) => (
                  <div key={idx} className="flex items-start">
                    <CheckCircle className="w-5 h-5 text-green-600 mr-2 flex-shrink-0 mt-0.5" />
                    <p className="text-sm text-green-800">{beneficio}</p>
                  </div>
                ))}
              </div>
            </div>
            
            {/* Cards de M√©tricas */}
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div className="bg-gradient-to-br from-[#032c62] to-[#17203c] rounded-xl p-6 text-white shadow-lg">
                <div className="flex items-center justify-between mb-2">
                  <span className="text-gray-300 text-sm font-medium">Economia Mensal</span>
                  <Calculator className="w-5 h-5 text-gray-400" />
                </div>
                <div className="text-3xl font-bold mb-1">
                  R$ {roi.economiaMensal.toLocaleString('pt-BR', {minimumFractionDigits: 0, maximumFractionDigits: 0})}
                </div>
                <div className="text-gray-300 text-sm">
                  Redu√ß√£o de {roi.benchmark.reducaoTempo}% em atividades manuais
                </div>
              </div>
              
              <div className="bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white shadow-lg">
                <div className="flex items-center justify-between mb-2">
                  <span className="text-green-100 text-sm font-medium">Economia Anual</span>
                  <TrendingUp className="w-5 h-5 text-green-200" />
                </div>
                <div className="text-3xl font-bold mb-1">
                  R$ {roi.economiaAnual.toLocaleString('pt-BR', {minimumFractionDigits: 0, maximumFractionDigits: 0})}
                </div>
                <div className="text-green-100 text-sm">
                  Retorno em {roi.payback.toFixed(1)} meses
                </div>
              </div>
              
              <div className="bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 text-white shadow-lg">
                <div className="flex items-center justify-between mb-2">
                  <span className="text-purple-100 text-sm font-medium">ROI Anual</span>
                  <Target className="w-5 h-5 text-purple-200" />
                </div>
                <div className="text-3xl font-bold mb-1">
                  {roi.roiAnual.toFixed(0)}%
                </div>
                <div className="text-purple-100 text-sm">
                  Retorno sobre investimento
                </div>
              </div>
              
              <div className="bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 text-white shadow-lg">
                <div className="flex items-center justify-between mb-2">
                  <span className="text-orange-100 text-sm font-medium">Investimento</span>
                  <Download className="w-5 h-5 text-orange-200" />
                </div>
                <div className="text-3xl font-bold mb-1">
                  R$ {roi.custoImplementacao.toLocaleString('pt-BR', {minimumFractionDigits: 0, maximumFractionDigits: 0})}
                </div>
                <div className="text-orange-100 text-sm">
                  Complexidade: {roi.complexidadeProjeto}
                </div>
              </div>

              {/* NOVO: Card de Economia por Processo */}
              <div className="bg-gradient-to-br from-teal-500 to-teal-600 rounded-xl p-6 text-white shadow-lg md:col-span-2">
                <div className="flex items-center justify-between mb-2">
                  <span className="text-teal-100 text-sm font-medium">Economia por Processo</span>
                  <Calculator className="w-5 h-5 text-teal-200" />
                </div>
                <div className="grid grid-cols-2 gap-4">
                  <div>
                    <div className="text-2xl font-bold mb-1">
                      R$ {roi.economiaPorProcessoMensal.toLocaleString('pt-BR', {minimumFractionDigits: 0, maximumFractionDigits: 0})}/m√™s
                    </div>
                    <div className="text-teal-100 text-xs">
                      Por processo ({formData.numeroProcessos} processos)
                    </div>
                  </div>
                  <div>
                    <div className="text-2xl font-bold mb-1">
                      R$ {roi.investimentoPorProcesso.toLocaleString('pt-BR', {minimumFractionDigits: 0, maximumFractionDigits: 0})}
                    </div>
                    <div className="text-teal-100 text-xs">
                      Investimento por processo
                    </div>
                  </div>
                </div>
              </div>
            </div>

            {/* NOVO: Metodologia de C√°lculo com Valida√ß√£o Cruzada */}
            <div className="bg-gray-50 rounded-xl p-6">
              <button
                onClick={() => setShowMethodology(!showMethodology)}
                className="w-full flex items-center justify-between text-left hover:bg-gray-100 p-3 rounded-lg transition-colors"
              >
                <h3 className="text-lg font-semibold text-gray-800">Metodologia de C√°lculo (Valida√ß√£o Cruzada)</h3>
                <span className="text-gray-600">
                  {showMethodology ? '‚ñ≤' : '‚ñº'}
                </span>
              </button>
              
              {showMethodology && (
                <div className="space-y-4 mt-4">
                  <div className="bg-blue-50 border-l-4 border-blue-500 p-4">
                    <h4 className="font-semibold text-blue-900 mb-2">üîç Precis√£o com Dupla Valida√ß√£o</h4>
                    <p className="text-sm text-blue-800 mb-3">
                      Usamos dois m√©todos independentes e calculamos a m√©dia para maior precis√£o:
                    </p>
                  </div>

                  <div className="bg-white p-4 rounded border border-gray-200">
                    <p className="font-medium text-gray-800 mb-2">üìä M√©todo 1: Por % de Tempo</p>
                    <p className="text-sm text-gray-600 mb-2">
                      {formData.numProfissionais} profissionais √ó 160h/m√™s √ó {formData.percentualAtividadesManuais}% √ó R$ {formData.custoPorHora} √ó {roi.coeficienteEsforco} (coef.)
                    </p>
                    <p className="text-lg font-bold text-[#032c62]">
                      = R$ {roi.custoAtualMensalPorTempo.toLocaleString('pt-BR', {minimumFractionDigits: 0, maximumFractionDigits: 0})}/m√™s
                    </p>
                  </div>

                  <div className="bg-white p-4 rounded border border-gray-200">
                    <p className="font-medium text-gray-800 mb-2">‚öôÔ∏è M√©todo 2: Por Processos</p>
                    <p className="text-sm text-gray-600 mb-2">
                      {formData.numeroProcessos} processos √ó {formData.tempoMedioProcesso}h √ó R$ {formData.custoPorHora} √ó 4.33 (semanas/m√™s) √ó {roi.coeficienteEsforco}
                    </p>
                    <p className="text-lg font-bold text-[#032c62]">
                      = R$ {roi.custoAtualMensalPorProcessos.toLocaleString('pt-BR', {minimumFractionDigits: 0, maximumFractionDigits: 0})}/m√™s
                    </p>
                  </div>

                  <div className="bg-green-50 p-4 rounded border-2 border-green-300">
                    <p className="font-medium text-green-900 mb-2">‚úÖ Custo Validado (M√©dia)</p>
                    <p className="text-2xl font-bold text-green-700">
                      R$ {roi.custoAtualMensal.toLocaleString('pt-BR', {minimumFractionDigits: 0, maximumFractionDigits: 0})}/m√™s
                    </p>
                  </div>

                  {formData.errosFrequentes && (
                    <div className="bg-red-50 p-4 rounded border-2 border-red-300">
                      <p className="font-medium text-red-900 mb-2">‚ö†Ô∏è Custo Adicional de Erros</p>
                      <p className="text-sm text-red-700 mb-2">
                        Retrabalho por erros frequentes: +15%
                      </p>
                      <p className="text-lg font-bold text-red-700">
                        + R$ {roi.custoErros.toLocaleString('pt-BR', {minimumFractionDigits: 0, maximumFractionDigits: 0})}/m√™s
                      </p>
                      <p className="text-xl font-bold text-red-900 mt-2 pt-2 border-t border-red-200">
                        Custo Total: R$ {roi.custoTotal.toLocaleString('pt-BR', {minimumFractionDigits: 0, maximumFractionDigits: 0})}/m√™s
                      </p>
                    </div>
                  )}

                  <div className="bg-white p-4 rounded border border-gray-200">
                    <p className="font-medium text-gray-800 mb-2">üí∞ Economia com Automa√ß√£o</p>
                    <p className="text-sm text-gray-600 mb-2">
                      R$ {roi.custoTotal.toLocaleString('pt-BR', {minimumFractionDigits: 0, maximumFractionDigits: 0})} √ó {roi.benchmark.reducaoTempo}% (benchmark {roi.benchmark.nome})
                    </p>
                    <p className="text-2xl font-bold text-green-600">
                      = R$ {roi.economiaMensal.toLocaleString('pt-BR', {minimumFractionDigits: 0, maximumFractionDigits: 0})}/m√™s
                    </p>
                  </div>
                </div>
              )}
            </div>

            {/* NOVO: An√°lise de Complexidade do Projeto */}
            <div className="bg-gradient-to-r from-blue-50 to-blue-100 rounded-xl p-6">
              <h3 className="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                <Award className="w-6 h-6 text-blue-700 mr-2" />
                An√°lise de Complexidade do Projeto
              </h3>
              
              <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div className="bg-white rounded-lg p-4 border-2 border-blue-300">
                  <p className="text-sm text-gray-600 mb-1">Complexidade</p>
                  <p className="text-2xl font-bold text-blue-700">{roi.complexidadeProjeto}</p>
                  <p className="text-xs text-gray-500 mt-1">{formData.numeroProcessos} processos</p>
                </div>
                
                <div className="bg-white rounded-lg p-4 border-2 border-blue-300">
                  <p className="text-sm text-gray-600 mb-1">Tempo Estimado</p>
                  <p className="text-2xl font-bold text-blue-700">{roi.tempoTotal} semanas</p>
                  <p className="text-xs text-gray-500 mt-1">‚âà {(roi.tempoTotal / 4.33).toFixed(1)} meses</p>
                </div>
                
                <div className="bg-white rounded-lg p-4 border-2 border-blue-300">
                  <p className="text-sm text-gray-600 mb-1">Estrat√©gia</p>
                  <p className="text-xl font-bold text-blue-700">{roi.estrategia}</p>
                  <p className="text-xs text-gray-500 mt-1">{roi.fasesImplementacao.length} fase(s)</p>
                </div>
              </div>

              <div className="mt-4 space-y-2">
                <p className="text-sm font-semibold text-gray-700">Fases de Implementa√ß√£o:</p>
                {roi.fasesImplementacao.map((fase, index) => (
                  <div key={index} className="bg-white rounded-lg p-3 border-l-4 border-blue-500">
                    <div className="flex justify-between items-center">
                      <span className="font-semibold text-gray-800">Fase {fase.fase}</span>
                      <span className="text-sm text-blue-600">{fase.duracao}</span>
                    </div>
                    <p className="text-sm text-gray-600 mt-1">
                      {fase.processos} processos - {fase.descricao}
                    </p>
                  </div>
                ))}
              </div>

              <div className="mt-4 bg-white rounded-lg p-4">
                <p className="text-sm font-semibold text-gray-700 mb-2">Cronograma Detalhado:</p>
                <div className="space-y-2">
                  <div className="flex justify-between text-sm">
                    <span className="text-gray-600">Discovery:</span>
                    <span className="font-semibold text-gray-800">{roi.tempoDiscovery} semanas</span>
                  </div>
                  <div className="flex justify-between text-sm">
                    <span className="text-gray-600">Desenvolvimento:</span>
                    <span className="font-semibold text-gray-800">{roi.tempoDev} semanas</span>
                  </div>
                  <div className="flex justify-between text-sm">
                    <span className="text-gray-600">Capacita√ß√£o:</span>
                    <span className="font-semibold text-gray-800">{roi.tempoCapacitacao} semanas</span>
                  </div>
                  <div className="flex justify-between text-sm pt-2 border-t border-gray-200">
                    <span className="font-semibold text-gray-700">Total:</span>
                    <span className="font-bold text-purple-700">{roi.tempoTotal} semanas</span>
                  </div>
                </div>
              </div>
            </div>

            {/* NOVO: Alertas de Viabilidade */}
            {roi.alertas.length > 0 && (
              <div className="bg-yellow-50 border-l-4 border-yellow-400 p-4">
                <div className="flex items-start">
                  <AlertTriangle className="w-5 h-5 text-yellow-600 mr-2 mt-0.5 flex-shrink-0" />
                  <div>
                    <h4 className="font-semibold text-yellow-900 mb-2">‚ö†Ô∏è Pontos de Aten√ß√£o</h4>
                    <ul className="space-y-1">
                      {roi.alertas.map((alerta, index) => (
                        <li key={index} className="text-sm text-yellow-800">
                          ‚Ä¢ {alerta.mensagem}
                        </li>
                      ))}
                    </ul>
                  </div>
                </div>
              </div>
            )}

            <div>
              <label className="block text-sm font-bold text-gray-700 mb-2">
                Qual a Prioridade desta Automa√ß√£o?
              </label>
              <div className="grid grid-cols-3 gap-3">
                <button
                  onClick={() => handleInputChange('prioridadeAutomacao', 'baixa')}
                  className={`px-4 py-3 rounded-lg border-2 transition-all ${
                    formData.prioridadeAutomacao === 'baixa'
                      ? 'bg-blue-50 text-blue-700 border-blue-300 font-semibold'
                      : 'bg-white text-gray-700 border-gray-300'
                  }`}
                >
                  <div className="text-center">
                    <div className="text-lg mb-1">üí°</div>
                    <div className="text-sm">Baixa</div>
                  </div>
                </button>
                <button
                  onClick={() => handleInputChange('prioridadeAutomacao', 'media')}
                  className={`px-4 py-3 rounded-lg border-2 transition-all ${
                    formData.prioridadeAutomacao === 'media'
                      ? 'bg-orange-50 text-orange-700 border-orange-300 font-semibold'
                      : 'bg-white text-gray-700 border-gray-300'
                  }`}
                >
                  <div className="text-center">
                    <div className="text-lg mb-1">‚ö†Ô∏è</div>
                    <div className="text-sm">M√©dia</div>
                  </div>
                </button>
                <button
                  onClick={() => handleInputChange('prioridadeAutomacao', 'alta')}
                  className={`px-4 py-3 rounded-lg border-2 transition-all ${
                    formData.prioridadeAutomacao === 'alta'
                      ? 'bg-red-50 text-red-700 border-red-300 font-semibold'
                      : 'bg-white text-gray-700 border-gray-300'
                  }`}
                >
                  <div className="text-center">
                    <div className="text-lg mb-1">üö®</div>
                    <div className="text-sm">Alta</div>
                  </div>
                </button>
              </div>
              <p className="text-xs text-gray-500 mt-2">
                {formData.errosFrequentes 
                  ? 'üí° Auto-selecionada como "Alta" devido a erros frequentes'
                  : 'üí° Auto-selecionada como "M√©dia" - voc√™ pode ajustar conforme necess√°rio'}
              </p>
            </div>

            {/* GR√ÅFICO: Distribui√ß√£o do Tempo */}
            <div className="bg-white rounded-xl shadow-lg p-6 border-2 border-gray-200">
              <h3 className="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                <svg className="w-6 h-6 text-[#032c62] mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z" />
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z" />
                </svg>
                Distribui√ß√£o do Tempo da Equipe Hoje
              </h3>
              <p className="text-sm text-gray-600 mb-4">
                Visualiza√ß√£o de como o tempo da equipe √© atualmente distribu√≠do entre tarefas manuais e trabalho estrat√©gico.
              </p>
              <div className="chart-container">
                <canvas id="chartPizzaTempo"></canvas>
              </div>
              <div className="mt-4 bg-red-50 rounded-lg p-4 border-l-4 border-red-500">
                <p className="text-sm text-red-900">
                  <strong>Impacto:</strong> {formData.percentualAtividadesManuais}% do tempo da equipe est√° sendo desperdi√ßado 
                  em tarefas que podem ser automatizadas! Com a automa√ß√£o, esse tempo volta para atividades de maior valor.
                </p>
              </div>
            </div>
          </div>
        );
      
      case 3:
        return (
          <div className="space-y-6">
            <div className="bg-[#032c62] rounded-lg px-6 py-4 -mx-8 mb-6 shadow-md">
              <h2 className="text-2xl font-bold text-white">Plano de A√ß√£o</h2>
            </div>

            {/* SITUA√á√ÉO CR√çTICA IDENTIFICADA */}
            <div className={`${mensagemPrioridade.bgColor} border-l-4 ${mensagemPrioridade.borderColor} rounded-lg p-6`}>
              <div className="flex items-start">
                <div className="flex-shrink-0 mr-4">
                  <div className={`w-12 h-12 ${mensagemPrioridade.bgColor} rounded-full flex items-center justify-center text-2xl`}>
                    {formData.prioridadeAutomacao === 'alta' ? 'üö®' : formData.prioridadeAutomacao === 'media' ? '‚ö†Ô∏è' : 'üí°'}
                  </div>
                </div>
                <div className="flex-1">
                  <h3 className={`text-xl font-bold ${mensagemPrioridade.textColor} mb-1`}>
                    {mensagemPrioridade.titulo}
                  </h3>
                  <p className={`text-sm ${mensagemPrioridade.textColor} mb-3`}>
                    {mensagemPrioridade.subtitulo}
                  </p>
                  <div className="space-y-2">
                    {formData.errosFrequentes && (
                      <p className={`text-sm ${mensagemPrioridade.textColor} flex items-center`}>
                        <AlertTriangle className="w-4 h-4 mr-2" />
                        Erros frequentes detectados - aumenta urg√™ncia da automa√ß√£o
                      </p>
                    )}
                    <p className={`text-sm ${mensagemPrioridade.textColor} flex items-center`}>
                      <Calculator className="w-4 h-4 mr-2" />
                      Economia potencial: R$ {roi.economiaMensal.toLocaleString('pt-BR', {minimumFractionDigits: 0, maximumFractionDigits: 0})}/m√™s
                    </p>
                    <p className={`text-sm ${mensagemPrioridade.textColor} flex items-center`}>
                      <Clock className="w-4 h-4 mr-2" />
                      Payback: {roi.payback.toFixed(1)} meses
                    </p>
                  </div>
                </div>
              </div>
            </div>

            {/* Timeline */}
            <div className="bg-white rounded-xl border-2 border-gray-200 p-6">
              <h3 className="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                <Clock className="w-6 h-6 text-[#032c62] mr-2" />
                Timeline de Implementa√ß√£o
              </h3>
              
              <div className="space-y-4">
                <div className="flex items-start">
                  <div className="w-16 h-16 rounded-full bg-[#032c62] text-white flex items-center justify-center font-bold text-lg mr-4 flex-shrink-0">
                    {timeline.discovery}s
                  </div>
                  <div className="flex-1">
                    <h4 className="font-semibold text-gray-800">Discovery e Mapeamento</h4>
                    <p className="text-sm text-gray-600">Identifica√ß√£o de processos e defini√ß√£o de escopo</p>
                  </div>
                </div>

                <div className="flex items-start">
                  <div className="w-16 h-16 rounded-full bg-green-600 text-white flex items-center justify-center font-bold text-lg mr-4 flex-shrink-0">
                    {timeline.desenvolvimento}s
                  </div>
                  <div className="flex-1">
                    <h4 className="font-semibold text-gray-800">Desenvolvimento de Workflows</h4>
                    <p className="text-sm text-gray-600">Constru√ß√£o e testes dos processos automatizados</p>
                  </div>
                </div>

                <div className="flex items-start">
                  <div className="w-16 h-16 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold text-lg mr-4 flex-shrink-0">
                    {timeline.implantacao}s
                  </div>
                  <div className="flex-1">
                    <h4 className="font-semibold text-gray-800">Implanta√ß√£o e Go-Live</h4>
                    <p className="text-sm text-gray-600">Capacita√ß√£o da equipe e entrada em produ√ß√£o</p>
                  </div>
                </div>
              </div>

              <div className="mt-6 pt-6 border-t border-gray-200">
                <div className="flex justify-between items-center">
                  <span className="text-gray-700 font-semibold">Tempo Total:</span>
                  <span className="text-2xl font-bold text-[#032c62]">{timeline.total} semanas</span>
                </div>
                <p className="text-sm text-gray-600 mt-2">{timeline.nota}</p>
              </div>
            </div>

            {/* Entregas Principais */}
            <div className="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6">
              <h3 className="text-lg font-semibold text-gray-800 mb-4">Principais Entregas</h3>
              <div className="space-y-3">
                {timeline.entregas.map((entrega, index) => (
                  <div key={index} className="flex items-center bg-white rounded-lg p-3 border border-blue-200">
                    <CheckCircle className="w-5 h-5 text-green-600 mr-3 flex-shrink-0" />
                    <p className="text-sm text-gray-700">{entrega}</p>
                  </div>
                ))}
              </div>
            </div>

            {/* Fatores Cr√≠ticos */}
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div className="bg-white rounded-lg p-4 border-2 border-gray-200">
                <h4 className="font-semibold text-gray-800 mb-3 flex items-center">
                  <CheckCircle className="w-5 h-5 text-green-600 mr-2" />
                  Fatores Cr√≠ticos de Sucesso
                </h4>
                <ul className="space-y-2 text-sm text-gray-600">
                  <li className="flex items-start">
                    <span className="text-green-600 mr-2">‚úì</span>
                    Patroc√≠nio executivo claro
                  </li>
                  <li className="flex items-start">
                    <span className="text-green-600 mr-2">‚úì</span>
                    Defini√ß√£o de m√©tricas de sucesso
                  </li>
                  <li className="flex items-start">
                    <span className="text-green-600 mr-2">‚úì</span>
                    Envolvimento da equipe desde o in√≠cio
                  </li>
                  <li className="flex items-start">
                    <span className="text-green-600 mr-2">‚úì</span>
                    Comunica√ß√£o transparente
                  </li>
                </ul>
              </div>

              <div className="bg-white rounded-lg p-4 border-2 border-gray-200">
                <h4 className="font-semibold text-gray-800 mb-3 flex items-center">
                  <AlertTriangle className="w-5 h-5 text-yellow-600 mr-2" />
                  Riscos e Mitiga√ß√µes
                </h4>
                <ul className="space-y-2 text-sm text-gray-600">
                  <li className="flex items-start">
                    <span className="text-red-500 mr-2">‚ö†</span>
                    Resist√™ncia ‚Üí Change management
                  </li>
                  <li className="flex items-start">
                    <span className="text-red-500 mr-2">‚ö†</span>
                    Qualidade dados ‚Üí Governan√ßa
                  </li>
                  <li className="flex items-start">
                    <span className="text-red-500 mr-2">‚ö†</span>
                    Depend√™ncia ‚Üí Capacita√ß√£o interna
                  </li>
                </ul>
              </div>
            </div>
          </div>
        );
      
      case 4:
        return (
          <div className="space-y-6">
            <div className="bg-gradient-to-r from-[#032c62] to-[#17203c] rounded-xl p-8 text-white">
              <h2 className="text-3xl font-bold mb-2">Business Case Completo</h2>
              <p className="text-gray-300">Automa√ß√£o de Processos - {getBenchmark().nome}</p>
            </div>

            <div className="bg-white rounded-xl shadow-lg p-8 space-y-6">
              {/* Resumo Executivo */}
              <div className="border-b pb-4">
                <h3 className="text-xl font-semibold text-gray-800 mb-4">Resumo Executivo</h3>
                <div className="grid grid-cols-2 gap-4 text-sm">
                  <div>
                    <p className="text-gray-600">Gestor: <span className="font-semibold text-gray-800">{formData.nomeGestor}</span></p>
                  </div>
                  <div>
                    <p className="text-gray-600">Cargo: <span className="font-semibold text-gray-800">{formData.cargo.charAt(0).toUpperCase() + formData.cargo.slice(1)}</span></p>
                  </div>
                  <div>
                    <p className="text-gray-600">√Årea: <span className="font-semibold text-gray-800">{getBenchmark().nome}</span></p>
                  </div>
                  <div>
                    <p className="text-gray-600">Empresa: <span className="font-semibold text-gray-800">{formData.empresa}</span></p>
                  </div>
                  <div>
                    <p className="text-gray-600">Prioridade: <span className={`font-semibold ${
                      formData.prioridadeAutomacao === 'alta' ? 'text-red-700' :
                      formData.prioridadeAutomacao === 'media' ? 'text-orange-700' :
                      'text-blue-700'
                    }`}>
                      {formData.prioridadeAutomacao.toUpperCase()}
                    </span></p>
                  </div>
                  <div>
                    <p className="text-gray-600">Erros Frequentes: <span className={`font-semibold ${formData.errosFrequentes ? 'text-red-700' : 'text-green-700'}`}>
                      {formData.errosFrequentes ? 'Sim' : 'N√£o'}
                    </span></p>
                  </div>
                </div>
              </div>

              {/* Situa√ß√£o Atual */}
              <div className="border-b pb-4">
                <h3 className="text-xl font-semibold text-gray-800 mb-4">Situa√ß√£o Atual</h3>
                <div className="bg-red-50 border-l-4 border-red-500 p-4">
                  <p className="text-sm font-medium text-red-900 mb-3">Desafios Identificados:</p>
                  <ul className="space-y-2 text-sm text-red-800">
                    <li>‚Ä¢ Equipe gasta {formData.percentualAtividadesManuais}% do tempo com tarefas manuais</li>
                    <li>‚Ä¢ {formData.numeroProcessos} processos cr√≠ticos gerando {roi.processosPorProfissional.toFixed(1)} processos/profissional</li>
                    <li>‚Ä¢ {formData.sistemasUtilizados.length} sistemas diferentes (complexidade {roi.coeficienteEsforco}x)</li>
                    <li>‚Ä¢ Custo mensal validado: R$ {roi.custoAtualMensal.toLocaleString('pt-BR', {minimumFractionDigits: 0, maximumFractionDigits: 0})}</li>
                    {formData.errosFrequentes && (
                      <li className="font-semibold">‚Ä¢ ‚ö†Ô∏è Erros frequentes adicionam R$ {roi.custoErros.toLocaleString('pt-BR', {minimumFractionDigits: 0, maximumFractionDigits: 0})}/m√™s em retrabalho</li>
                    )}
                  </ul>
                </div>

                {/* GR√ÅFICO: Antes vs Depois */}
                <div className="mt-6">
                  <h4 className="text-md font-semibold text-gray-800 mb-4 flex items-center">
                    <svg className="w-5 h-5 text-[#032c62] mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                    </svg>
                    Compara√ß√£o: Cen√°rio Atual vs Com Automa√ß√£o
                  </h4>
                  <div className="chart-container">
                    <canvas id="chartAntesDepois"></canvas>
                  </div>
                </div>
              </div>
            </div>

            {/* SITUA√á√ÉO CR√çTICA NO BUSINESS CASE */}
            <div className={`${mensagemPrioridade.bgColor} border-l-4 ${mensagemPrioridade.borderColor} rounded-lg p-6`}>
              <div className="flex items-start">
                <div className="flex-shrink-0 mr-4">
                  <div className={`w-12 h-12 ${mensagemPrioridade.bgColor} rounded-full flex items-center justify-center text-2xl`}>
                    {formData.prioridadeAutomacao === 'alta' ? 'üö®' : formData.prioridadeAutomacao === 'media' ? '‚ö†Ô∏è' : 'üí°'}
                  </div>
                </div>
                <div className="flex-1">
                  <h3 className={`text-xl font-bold ${mensagemPrioridade.textColor} mb-1`}>
                    {mensagemPrioridade.titulo}
                  </h3>
                  <p className={`text-sm ${mensagemPrioridade.textColor} mb-3`}>
                    Prioridade: <strong>{formData.prioridadeAutomacao.toUpperCase()}</strong> | 
                    {formData.errosFrequentes ? ' Erros frequentes detectados' : ' Sem erros frequentes'}
                  </p>
                  <div className="grid grid-cols-2 gap-4 mt-3">
                    <div className={`bg-white bg-opacity-50 rounded-lg p-3`}>
                      <p className="text-xs text-gray-700">Economia Potencial</p>
                      <p className={`text-xl font-bold ${mensagemPrioridade.textColor}`}>
                        R$ {roi.economiaMensal.toLocaleString('pt-BR', {minimumFractionDigits: 0, maximumFractionDigits: 0})}/m√™s
                      </p>
                    </div>
                    <div className={`bg-white bg-opacity-50 rounded-lg p-3`}>
                      <p className="text-xs text-gray-700">Payback</p>
                      <p className={`text-xl font-bold ${mensagemPrioridade.textColor}`}>
                        {roi.payback.toFixed(1)} meses
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div className="bg-white rounded-xl shadow-lg p-8 space-y-6">
              {/* An√°lise Financeira */}
              <div className="border-b pb-4">
                <h3 className="text-xl font-semibold text-gray-800 mb-4">An√°lise Financeira</h3>
                
                <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
                  <div className="bg-green-50 rounded-lg p-4 text-center border border-green-200">
                    <p className="text-xs text-gray-600 mb-1">Economia Mensal</p>
                    <p className="text-xl font-bold text-green-700">
                      R$ {roi.economiaMensal.toLocaleString('pt-BR', {minimumFractionDigits: 0, maximumFractionDigits: 0})}
                    </p>
                  </div>
                  <div className="bg-green-50 rounded-lg p-4 text-center border border-green-200">
                    <p className="text-xs text-gray-600 mb-1">Economia Anual</p>
                    <p className="text-xl font-bold text-green-700">
                      R$ {roi.economiaAnual.toLocaleString('pt-BR', {minimumFractionDigits: 0, maximumFractionDigits: 0})}
                    </p>
                  </div>
                  <div className="bg-blue-50 rounded-lg p-4 text-center border border-blue-200">
                    <p className="text-xs text-gray-600 mb-1">Investimento</p>
                    <p className="text-xl font-bold text-blue-700">
                      R$ {roi.custoImplementacao.toLocaleString('pt-BR', {minimumFractionDigits: 0, maximumFractionDigits: 0})}
                    </p>
                    <p className="text-xs text-gray-500 mt-1">{roi.complexidadeProjeto}</p>
                  </div>
                  <div className="bg-purple-50 rounded-lg p-4 text-center border border-purple-200">
                    <p className="text-xs text-gray-600 mb-1">Payback</p>
                    <p className="text-xl font-bold text-purple-700">
                      {roi.payback.toFixed(1)} meses
                    </p>
                  </div>
                </div>

                {/* GR√ÅFICO: Valida√ß√£o Cruzada */}
                <div className="mt-6 bg-blue-50 rounded-xl p-6 border-2 border-blue-200">
                  <h4 className="text-md font-semibold text-blue-900 mb-3 flex items-center">
                    <svg className="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" />
                    </svg>
                    Valida√ß√£o Cruzada dos C√°lculos dos Custos
                  </h4>
                  <p className="text-sm text-blue-800 mb-4">
                    Compara√ß√£o dos dois m√©todos independentes de c√°lculo dos custos para maior precis√£o e credibilidade.
                  </p>
                  <div className="chart-container">
                    <canvas id="chartValidacao"></canvas>
                  </div>
                </div>

                <div className="mt-4 bg-teal-50 rounded-lg p-4 border border-teal-200">
                  <h4 className="font-semibold text-teal-900 mb-2">Economia por Processo</h4>
                  <div className="grid grid-cols-2 gap-4 text-sm">
                    <div>
                      <p className="text-teal-700">Mensal por processo:</p>
                      <p className="font-bold text-teal-900">
                        R$ {roi.economiaPorProcessoMensal.toLocaleString('pt-BR', {minimumFractionDigits: 0, maximumFractionDigits: 0})}
                      </p>
                    </div>
                    <div>
                      <p className="text-teal-700">Investimento por processo:</p>
                      <p className="font-bold text-teal-900">
                        R$ {roi.investimentoPorProcesso.toLocaleString('pt-BR', {minimumFractionDigits: 0, maximumFractionDigits: 0})}
                      </p>
                    </div>
                  </div>
                </div>

                {/* GR√ÅFICO: An√°lise de Payback */}
                <div className="mt-6 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-6 border-2 border-green-200">
                  <h4 className="text-md font-semibold text-green-900 mb-3 flex items-center">
                    <svg className="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
                    </svg>
                    An√°lise de Payback - Ponto de Equil√≠brio
                  </h4>
                  <p className="text-sm text-green-800 mb-4">
                    Visualiza√ß√£o de quando o investimento se paga. A linha verde mostra a economia acumulada crescendo at√© ultrapassar o investimento inicial.
                  </p>
                  <div className="chart-container">
                    <canvas id="chartPayback"></canvas>
                  </div>
                  <div className="mt-4 bg-white rounded-lg p-4 border-l-4 border-green-500">
                    <p className="text-sm text-green-900">
                      <strong>Ponto de Equil√≠brio:</strong> Em {roi.payback.toFixed(1)} meses o investimento est√° completamente pago. 
                      A partir da√≠, toda economia √© lucro l√≠quido! ROI anual de {roi.roiAnual.toFixed(0)}%.
                    </p>
                  </div>
                </div>

                {/* GR√ÅFICO: Evolu√ß√£o da Economia */}
                <div className="mt-6 bg-gradient-to-r from-purple-50 to-indigo-50 rounded-xl p-6 border-2 border-purple-200">
                  <h4 className="text-md font-semibold text-purple-900 mb-3 flex items-center">
                    <svg className="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z" />
                    </svg>
                    Evolu√ß√£o da Economia ao Longo de 12 Meses
                  </h4>
                  <p className="text-sm text-purple-800 mb-4">
                    Proje√ß√£o da economia acumulada m√™s a m√™s. Veja como o benef√≠cio cresce continuamente ao longo do primeiro ano.
                  </p>
                  <div className="chart-container">
                    <canvas id="chartEvolucao"></canvas>
                  </div>
                  <div className="mt-4 bg-white rounded-lg p-4 border-l-4 border-purple-500">
                    <div className="grid grid-cols-3 gap-4 text-center">
                      <div>
                        <p className="text-xs text-gray-600">Economia Total Ano 1</p>
                        <p className="text-lg font-bold text-purple-700">
                          R$ {roi.economiaAnual.toLocaleString('pt-BR', {minimumFractionDigits: 0, maximumFractionDigits: 0})}
                        </p>
                      </div>
                      <div>
                        <p className="text-xs text-gray-600">Investimento</p>
                        <p className="text-lg font-bold text-blue-700">
                          R$ {roi.custoImplementacao.toLocaleString('pt-BR', {minimumFractionDigits: 0, maximumFractionDigits: 0})}
                        </p>
                      </div>
                      <div>
                        <p className="text-xs text-gray-600">Lucro L√≠quido Ano 1</p>
                        <p className="text-lg font-bold text-green-700">
                          R$ {(roi.economiaAnual - roi.custoImplementacao).toLocaleString('pt-BR', {minimumFractionDigits: 0, maximumFractionDigits: 0})}
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              {/* Plano de Implementa√ß√£o */}
              <div className="border-b pb-4">
                <h3 className="text-xl font-semibold text-gray-800 mb-4">Plano de Implementa√ß√£o</h3>
                
                <div className="bg-purple-50 rounded-lg p-4 border border-purple-200 mb-4">
                  <h4 className="font-semibold text-purple-900 mb-2">Estrat√©gia: {roi.estrategia}</h4>
                  <p className="text-sm text-purple-700 mb-3">
                    Complexidade {roi.complexidadeProjeto} | Tempo total: {roi.tempoTotal} semanas
                  </p>
                  
                  <div className="space-y-2">
                    {roi.fasesImplementacao.map((fase, index) => (
                      <div key={index} className="bg-white rounded p-3 border border-purple-200">
                        <div className="flex justify-between items-center mb-1">
                          <span className="font-semibold text-gray-800">Fase {fase.fase}</span>
                          <span className="text-sm text-purple-600">{fase.duracao}</span>
                        </div>
                        <p className="text-sm text-gray-600">
                          {fase.processos} processos - {fase.descricao}
                        </p>
                      </div>
                    ))}
                  </div>
                </div>

                <div className="bg-gray-50 rounded-lg p-4">
                  <h4 className="font-semibold text-gray-800 mb-3">Cronograma Detalhado</h4>
                  <div className="space-y-2 text-sm">
                    <div className="flex justify-between">
                      <span className="text-gray-600">Discovery:</span>
                      <span className="font-semibold">{roi.tempoDiscovery} semanas</span>
                    </div>
                    <div className="flex justify-between">
                      <span className="text-gray-600">Desenvolvimento:</span>
                      <span className="font-semibold">{roi.tempoDev} semanas</span>
                    </div>
                    <div className="flex justify-between">
                      <span className="text-gray-600">Capacita√ß√£o:</span>
                      <span className="font-semibold">{roi.tempoCapacitacao} semanas</span>
                    </div>
                    <div className="flex justify-between pt-2 border-t border-gray-300">
                      <span className="font-bold text-gray-800">Total:</span>
                      <span className="font-bold text-[#032c62]">{roi.tempoTotal} semanas</span>
                    </div>
                  </div>
                </div>
              </div>

              {/* Pr√≥ximos Passos */}
              <div>
                <h3 className="text-xl font-semibold text-gray-800 mb-4">Pr√≥ximos Passos</h3>
                <div className="space-y-3">
                  <div className="flex items-start space-x-3">
                    <div className="w-8 h-8 rounded-full bg-[#032c62] text-white flex items-center justify-center text-sm font-bold flex-shrink-0">1</div>
                    <p className="text-gray-700 text-sm pt-1">Apresentar business case para stakeholders</p>
                  </div>
                  <div className="flex items-start space-x-3">
                    <div className="w-8 h-8 rounded-full bg-[#032c62] text-white flex items-center justify-center text-sm font-bold flex-shrink-0">2</div>
                    <p className="text-gray-700 text-sm pt-1">Agendar reuni√£o de discovery com HupData</p>
                  </div>
                  <div className="flex items-start space-x-3">
                    <div className="w-8 h-8 rounded-full bg-[#032c62] text-white flex items-center justify-center text-sm font-bold flex-shrink-0">3</div>
                    <p className="text-gray-700 text-sm pt-1">Definir escopo e cronograma detalhado</p>
                  </div>
                  <div className="flex items-start space-x-3">
                    <div className="w-8 h-8 rounded-full bg-[#032c62] text-white flex items-center justify-center text-sm font-bold flex-shrink-0">4</div>
                    <p className="text-gray-700 text-sm pt-1">Iniciar fase de mapeamento de processos</p>
                  </div>
                </div>
              </div>
            </div>

            {/* Bot√µes de A√ß√£o */}
            <div className="flex gap-3 justify-center flex-wrap">
              <button
                onClick={() => window.print()}
                className="px-6 py-3 bg-[#032c62] text-white rounded-lg hover:bg-[#17203c] transition-colors flex items-center gap-2 shadow-lg"
              >
                <Download className="w-5 h-5" />
                Baixar Business Case (PDF)
              </button>
              
              <button
                onClick={() => {
                  const mailto = `mailto:?subject=Business Case - Automa√ß√£o ${formData.empresa}&body=Confira o business case desenvolvido`;
                  window.location.href = mailto;
                }}
                className="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 shadow-lg"
              >
                <FileText className="w-5 h-5" />
                Compartilhar por Email
              </button>
            </div>

            {/* CTA Final */}
            <div className="bg-gradient-to-r from-[#17203c] to-[#032c62] rounded-xl p-6 text-white text-center">
              <p className="text-lg font-semibold mb-2">Pronto para come√ßar?</p>
              <p className="text-gray-300 text-sm mb-4">Agende uma conversa com nossos especialistas</p>
              <a
                href="https://hupdata.com/servicos/auditoria-tax/"
                target="_blank"
                rel="noopener noreferrer"
                className="inline-block px-6 py-2 bg-white text-[#032c62] rounded-lg font-medium hover:bg-gray-100 transition-colors"
              >
                Falar com HupData
              </a>
            </div>
          </div>
        );
      
      default:
        return null;
    }
  };

  const canProceed = () => {
    if (currentStep === 0) {
      return formData.nomeGestor && formData.email && formData.whatsapp && formData.empresa;
    }
    return true;
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8 px-4">
      <div className="max-w-5xl mx-auto">
        <div className="text-center mb-8">
          <h1 className="text-4xl font-bold text-gray-900 mb-2">
            Business Case Builder
          </h1>
          <p className="text-gray-600">
            Construa seu business case de automa√ß√£o em minutos
          </p>
        </div>
        
        <div className="bg-white rounded-2xl shadow-xl overflow-hidden">
          <div className="bg-[#032c62] px-6 py-4">
            <div className="flex justify-between items-center overflow-x-auto">
              {steps.map((step, index) => {
                const Icon = step.icon;
                return (
                  <div key={step.id} className="flex items-center">
                    <div className={`flex items-center ${index <= currentStep ? 'text-white' : 'text-gray-400'}`}>
                      <div className={`w-10 h-10 rounded-full flex items-center justify-center ${
                        index <= currentStep ? 'bg-white text-[#032c62]' : 'bg-[#17203c] text-gray-400'
                      }`}>
                        <Icon className="w-5 h-5" />
                      </div>
                      <span className="ml-2 text-sm font-medium hidden md:block">
                        {step.title}
                      </span>
                    </div>
                    {index < steps.length - 1 && (
                      <ChevronRight className="w-5 h-5 mx-2 text-gray-400" />
                    )}
                  </div>
                );
              })}
            </div>
          </div>
          
          <div className="p-8">
            {renderStepContent()}
          </div>
          
          <div className="bg-white px-8 py-4 flex justify-between items-center border-t">
            <button
              onClick={() => setCurrentStep(Math.max(0, currentStep - 1))}
              disabled={currentStep === 0}
              className={`px-6 py-2 rounded-lg flex items-center gap-2 ${
                currentStep === 0
                  ? 'bg-gray-200 text-gray-400 cursor-not-allowed'
                  : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
              }`}>
              <ChevronLeft className="w-4 h-4" />
              Anterior
            </button>
            
            <div className="text-sm text-gray-600">
              Passo {currentStep + 1} de {steps.length}
            </div>
            
            <button
              onClick={() => setCurrentStep(Math.min(steps.length - 1, currentStep + 1))}
              disabled={currentStep === steps.length - 1 || !canProceed()}
              className={`px-6 py-2 rounded-lg flex items-center gap-2 ${
                currentStep === steps.length - 1 || !canProceed()
                  ? 'bg-gray-200 text-gray-400 cursor-not-allowed'
                  : 'bg-[#032c62] text-white hover:bg-[#17203c]'
              }`}
            >
              Pr√≥ximo
              <ChevronRight className="w-4 h-4" />
            </button>
          </div>
        </div>
        
        <div className="mt-6 text-center text-sm text-gray-600">
          <p>Desenvolvido por <span className="font-semibold text-[#032c62]">HupData</span> - Especialistas em Automa√ß√£o de Dados</p>
        </div>
      </div>
    </div>
  );
};

    ReactDOM.render(<BusinessCaseBuilder />, document.getElementById('root'));
  </script>
</body>
</html>
